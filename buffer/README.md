<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# buffer

```go
import "github.com/fufuok/bytespool/buffer"
```

## Index

- [Variables](<#variables>)
- [func MaxSize() int](<#func-maxsize>)
- [func MinSize() int](<#func-minsize>)
- [func Put(bb *Buffer)](<#func-put>)
- [func Release(bb *Buffer) (ok bool)](<#func-release>)
- [func SetCapacity(minSize, maxSize int)](<#func-setcapacity>)
- [type Buffer](<#type-buffer>)
  - [func Clone(bb *Buffer) *Buffer](<#func-clone>)
  - [func Get(capacity ...int) *Buffer](<#func-get>)
  - [func Make(capacity int) *Buffer](<#func-make>)
  - [func Make64(capacity uint64) *Buffer](<#func-make64>)
  - [func MakeMax() *Buffer](<#func-makemax>)
  - [func MakeMin() *Buffer](<#func-makemin>)
  - [func NewBytes(bs []byte) *Buffer](<#func-newbytes>)
  - [func NewString(s string) *Buffer](<#func-newstring>)
  - [func (bb *Buffer) Bytes() []byte](<#func-buffer-bytes>)
  - [func (bb *Buffer) Cap() int](<#func-buffer-cap>)
  - [func (bb *Buffer) Clone() *Buffer](<#func-buffer-clone>)
  - [func (bb *Buffer) Close() error](<#func-buffer-close>)
  - [func (bb *Buffer) Grow(n int)](<#func-buffer-grow>)
  - [func (bb *Buffer) Len() int](<#func-buffer-len>)
  - [func (bb *Buffer) Put()](<#func-buffer-put>)
  - [func (bb *Buffer) Read(p []byte) (n int, err error)](<#func-buffer-read>)
  - [func (bb *Buffer) ReadFrom(r io.Reader) (int64, error)](<#func-buffer-readfrom>)
  - [func (bb *Buffer) RefAdd(delta int64)](<#func-buffer-refadd>)
  - [func (bb *Buffer) RefDec()](<#func-buffer-refdec>)
  - [func (bb *Buffer) RefInc()](<#func-buffer-refinc>)
  - [func (bb *Buffer) RefReset()](<#func-buffer-refreset>)
  - [func (bb *Buffer) RefStore(val int64)](<#func-buffer-refstore>)
  - [func (bb *Buffer) RefSwapDec() (c int64)](<#func-buffer-refswapdec>)
  - [func (bb *Buffer) RefValue() int64](<#func-buffer-refvalue>)
  - [func (bb *Buffer) Release() bool](<#func-buffer-release>)
  - [func (bb *Buffer) Reset()](<#func-buffer-reset>)
  - [func (bb *Buffer) Set(p []byte)](<#func-buffer-set>)
  - [func (bb *Buffer) SetString(s string)](<#func-buffer-setstring>)
  - [func (bb *Buffer) String() string](<#func-buffer-string>)
  - [func (bb *Buffer) Truncate(n int)](<#func-buffer-truncate>)
  - [func (bb *Buffer) Write(p []byte) (int, error)](<#func-buffer-write>)
  - [func (bb *Buffer) WriteByte(c byte) error](<#func-buffer-writebyte>)
  - [func (bb *Buffer) WriteString(s string) (int, error)](<#func-buffer-writestring>)
  - [func (bb *Buffer) WriteTo(w io.Writer) (int64, error)](<#func-buffer-writeto>)


## Variables

```go
var (
    ErrTooLarge   = errors.New("buffer: too large")
    ErrTruncation = errors.New("buffer: truncation out of range")
    ErrGrow       = errors.New("buffer: negative count")
    ErrClose      = errors.New("buffer: failed to add it to the pool")
)
```

```go
var (
    // DefaultBufferSize is an initial allocation minimal capacity.
    DefaultBufferSize = 64
)
```

## func MaxSize

```go
func MaxSize() int
```

## func MinSize

```go
func MinSize() int
```

## func Put

```go
func Put(bb *Buffer)
```

Put is the same as b\.Release\.

## func Release

```go
func Release(bb *Buffer) (ok bool)
```

Release put B back into the byte pool of the corresponding scale\, and put the Buffer back into the buffer pool\. Buffers smaller than the minimum capacity or larger than the maximum capacity are discarded\.

## func SetCapacity

```go
func SetCapacity(minSize, maxSize int)
```

SetCapacity initialize to the default byte slice pool\. Divide into multiple pools according to the capacity scale\. Maximum range of byte slice pool: \[2\,1\<\<31\]

## type Buffer

Buffer similar to bytes\.Buffer\, but provides finer\-grained multiplexing of underlying byte slices\. The zero value for Buffer is an empty buffer ready to use\, but capacity will be 0\. It is recommended to use pool to initialize a Buffer: e\.g\.:: bb := buffer\.Get\(\)    // The initial capacity is 64 \(DefaultBufferSize\) bb := buffer\.Make\(8\)  // The initial capacity is 8 After use\, put it back in the pool: bb\.Put\(\) bb\.Release\(\)

```go
type Buffer struct {
    B []byte
    // contains filtered or unexported fields
}
```

<details><summary>Example</summary>
<p>

```go
package main

import (
	"fmt"
	"github.com/fufuok/bytespool/buffer"
)

func main() {
	bb := buffer.Get()

	bb.SetString("1")
	_, _ = bb.WriteString("22")
	_, _ = bb.Write([]byte("333"))
	_ = bb.WriteByte('x')
	bb.Truncate(6)

	fmt.Printf("result=%q", bb.String())

	// After use, put Buffer back in the pool.
	buffer.Put(bb)

}
```

#### Output

```
result="122333"
```

</p>
</details>

### func Clone

```go
func Clone(bb *Buffer) *Buffer
```

Clone returns a copy of the Buffer\.B\. Atomically reset the reference count to 0\.

### func Get

```go
func Get(capacity ...int) *Buffer
```

### func Make

```go
func Make(capacity int) *Buffer
```

Make return a Buffer with a byte slice of length 0\. Capacity will not be 0\, max\(capacity\, defaultPools\.bs\.MinSize\(\)\)

### func Make64

```go
func Make64(capacity uint64) *Buffer
```

### func MakeMax

```go
func MakeMax() *Buffer
```

### func MakeMin

```go
func MakeMin() *Buffer
```

### func NewBytes

```go
func NewBytes(bs []byte) *Buffer
```

NewBytes returns a byte slice of the specified content\.

### func NewString

```go
func NewString(s string) *Buffer
```

NewString returns a byte slice of the specified content\.

### func \(\*Buffer\) Bytes

```go
func (bb *Buffer) Bytes() []byte
```

### func \(\*Buffer\) Cap

```go
func (bb *Buffer) Cap() int
```

### func \(\*Buffer\) Clone

```go
func (bb *Buffer) Clone() *Buffer
```

Clone returns a copy of the Buffer\.B\. Atomically reset the reference count to 0\.

### func \(\*Buffer\) Close

```go
func (bb *Buffer) Close() error
```

Close implements io\.Closer\.

### func \(\*Buffer\) Grow

```go
func (bb *Buffer) Grow(n int)
```

Grow grows the internal buffer such that \`n\` bytes can be written without reallocating\. If n is negative\, Grow will panic\. If the buffer can't grow it will panic with ErrTooLarge\.

### func \(\*Buffer\) Len

```go
func (bb *Buffer) Len() int
```

### func \(\*Buffer\) Put

```go
func (bb *Buffer) Put()
```

Put is the same as b\.Release\.

### func \(\*Buffer\) Read

```go
func (bb *Buffer) Read(p []byte) (n int, err error)
```

Read implements io\.Reader\.

The function copies data from Buffer\.B to p\. The return value n is the number of bytes read\, error is always nil\.

### func \(\*Buffer\) ReadFrom

```go
func (bb *Buffer) ReadFrom(r io.Reader) (int64, error)
```

ReadFrom implements io\.ReaderFrom\.

The function appends all the data read from r to Buffer\.B\.

### func \(\*Buffer\) RefAdd

```go
func (bb *Buffer) RefAdd(delta int64)
```

### func \(\*Buffer\) RefDec

```go
func (bb *Buffer) RefDec()
```

RefDec atomically decrement the reference count by 1\.

### func \(\*Buffer\) RefInc

```go
func (bb *Buffer) RefInc()
```

RefInc atomically increment the reference count by 1\.

### func \(\*Buffer\) RefReset

```go
func (bb *Buffer) RefReset()
```

RefReset atomically reset the reference count to 0\.

### func \(\*Buffer\) RefStore

```go
func (bb *Buffer) RefStore(val int64)
```

RefStore atomically stores val into the reference count\.

### func \(\*Buffer\) RefSwapDec

```go
func (bb *Buffer) RefSwapDec() (c int64)
```

RefSwapDec atomically decrement the reference count by 1 and return the old value\.

### func \(\*Buffer\) RefValue

```go
func (bb *Buffer) RefValue() int64
```

RefValue atomically loads the reference count\.

### func \(\*Buffer\) Release

```go
func (bb *Buffer) Release() bool
```

Release put B back into the byte pool of the corresponding scale\, and put the Buffer back into the buffer pool\. Buffers smaller than the minimum capacity or larger than the maximum capacity are discarded\.

### func \(\*Buffer\) Reset

```go
func (bb *Buffer) Reset()
```

Reset is the same as Truncate\(0\)\.

### func \(\*Buffer\) Set

```go
func (bb *Buffer) Set(p []byte)
```

Set sets Buffer\.B to p\.

### func \(\*Buffer\) SetString

```go
func (bb *Buffer) SetString(s string)
```

SetString sets Buffer\.B to s\.

### func \(\*Buffer\) String

```go
func (bb *Buffer) String() string
```

String implements print\.Stringer\.

if the Buffer is a nil pointer\, it returns "" instead of "\<nil\>"

### func \(\*Buffer\) Truncate

```go
func (bb *Buffer) Truncate(n int)
```

Truncate buffer data\, keep data of specified length\. It panics if n is negative or greater than the length of the buffer\.

### func \(\*Buffer\) Write

```go
func (bb *Buffer) Write(p []byte) (int, error)
```

Write implements io\.Writer\.

The function appends all the data in p to Buffer\.B\. The returned error is always nil\.

### func \(\*Buffer\) WriteByte

```go
func (bb *Buffer) WriteByte(c byte) error
```

WriteByte implements io\.ByteWriter\.

The function appends the byte c to Buffer\.B\. The returned error is always nil\.

### func \(\*Buffer\) WriteString

```go
func (bb *Buffer) WriteString(s string) (int, error)
```

WriteString implements io\.StringWriter\.

The function appends the s to Buffer\.B\. The returned error is always nil\.

### func \(\*Buffer\) WriteTo

```go
func (bb *Buffer) WriteTo(w io.Writer) (int64, error)
```

WriteTo implements io\.WriterTo\.



Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
